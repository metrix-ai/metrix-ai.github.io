"use strict";function Data(t){this.x=t,this.y=0,this.history=[],this.historySizeMax=Math.floor(Math.random()*config.maxLength+config.minLength)}function putData(){for(var t,e=Math.floor(Math.random()*count)*config.size,i=0;t=datarray[i];i++)if(t.x===e&&t.y-t.historySizeMax*config.size+config.size<config.size)return;datarray.push(new Data(e))}function can_st(){setInterval(function(){ctx.clearRect(0,0,width,height),datarray.length<config.amount&&putData();for(var t,e=0;t=datarray[e];e++)t.update(),t.draw()},config.speed)}function setup(){for(var t=0;t<opts.particleAmount;t++)particles.push(new Particle);window.requestAnimationFrame(loop)}function loop(){window.requestAnimationFrame(loop),drawArea.clearRect(0,0,w,h);for(var t=0;t<particles.length;t++)particles[t].update(),particles[t].draw();for(var t=0;t<particles.length;t++)linkPoints(particles[t],particles)}var matrix=document.getElementById("matrix"),ctx=matrix.getContext("2d"),config={amount:80,speed:100,size:14,minLength:5,maxLength:15,firstColor:"#eeeeee",color:"#4C4C4C"},datarray=[],width=ctx.canvas.width=window.innerWidth,height=ctx.canvas.height=window.innerHeight;Data.prototype.update=function(){this.y+=config.size,this.y>=height+this.historySizeMax*config.size&&(datarray.splice(datarray.indexOf(this),1),putData()),this.history.unshift(String.fromCharCode(60+Math.floor(62*Math.random()))),this.history.length>this.historySizeMax&&this.history.pop()},Data.prototype.draw=function(){if(!(Math.random()>.995)){ctx.fillStyle=config.firstColor,ctx.fillText(this.history[0],this.x,this.y),ctx.fillStyle=config.color;for(var t,e=1;t=this.history[e];e++)ctx.fillText(t,this.x,this.y-e*config.size)}};var count=Math.floor(width/config.size);ctx.font=config.size+"px monospace",ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.shadowBlur=0,ctx.shadowColor=config.color,can_st();var scroll_btn_1=document.getElementById("scroll__bottom"),V=.2;scroll_btn_1.addEventListener("click",function(t){function e(t){null===o&&(o=t);var r=t-o,s=n<0?Math.max(i-r/V,i+n):Math.min(i+r/V,i+n);window.scrollTo(0,s),s!=i+n?requestAnimationFrame(e):location.hash=a}t.preventDefault();var i=window.pageYOffset,a="#m",n=document.querySelector(a).getBoundingClientRect().top,o=null;requestAnimationFrame(e)},!1);var scroll_btn_2=document.getElementById("scroll__bottom_2");scroll_btn_2.addEventListener("click",function(t){function e(t){null===o&&(o=t);var r=t-o,s=n<0?Math.max(i-r/V,i+n):Math.min(i+r/V,i+n);window.scrollTo(0,s),s!=i+n?requestAnimationFrame(e):location.hash=a}t.preventDefault();var i=window.pageYOffset,a=this.href.replace(/[^#]*(.*)/,"$1"),n=document.querySelector(a).getBoundingClientRect().top,o=null;console.log(a),requestAnimationFrame(e)},!1);var fix_bl=document.getElementById("fixec_block"),fix_po=fix_bl.style.position,fix_pa=fix_bl.parentElement;window.onscroll=function(){fix_pa.getBoundingClientRect().top<=0?"fixed"!=fix_po&&(fix_bl.style.position="fixed"):"static"!=fix_po&&(fix_bl.style.position="static")},window.addEventListener("load",function(){fix_pa.style.height=fix_bl.getBoundingClientRect().height+35+"px"}),window.addEventListener("resize",function(){deBouncer(),can_st(),fix_pa.style.height=fix_bl.getBoundingClientRect().height+35+"px"});var canvasBody=document.getElementById("canvas"),drawArea=canvasBody.getContext("2d"),w=canvasBody.width=canvasBody.parentElement.getBoundingClientRect().width,h=canvasBody.height=canvasBody.parentElement.getBoundingClientRect().height,delay=200,tid,opts={particleColor:"rgb(0, 185, 220)",lineColor:"rrgb(0, 185, 220)",particleAmount:100,defaultSpeed:0,variantSpeed:.6,defaultRadius:2,variantRadius:2,linkRadius:200},rgb=opts.lineColor.match(/\d+/g),particles=[],resizeReset=function(){w=canvasBody.width=canvasBody.parentElement.getBoundingClientRect().width,h=canvasBody.height=canvasBody.parentElement.getBoundingClientRect().height},deBouncer=function(){clearTimeout(tid),tid=setTimeout(function(){resizeReset()},delay)},checkDistance=function(t,e,i,a){return Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2))},linkPoints=function(t,e){for(var i=0;i<e.length;i++){var a=checkDistance(t.x,t.y,e[i].x,e[i].y),n=1-a/opts.linkRadius;n>0&&(drawArea.lineWidth=.5,drawArea.strokeStyle="rgba("+rgb[0]+", "+rgb[1]+", "+rgb[2]+", "+n+")",drawArea.beginPath(),drawArea.moveTo(t.x,t.y),drawArea.lineTo(e[i].x,e[i].y),drawArea.closePath(),drawArea.stroke())}},Particle=function(t,e){this.x=Math.random()*w,this.y=Math.random()*h,this.speed=opts.defaultSpeed+Math.random()*opts.variantSpeed,this.directionAngle=Math.floor(360*Math.random()),this.color=opts.particleColor,this.radius=opts.defaultRadius+Math.random()*opts.variantRadius,this.vector={x:Math.cos(this.directionAngle)*this.speed,y:Math.sin(this.directionAngle)*this.speed},this.update=function(){this.border(),this.x+=this.vector.x,this.y+=this.vector.y},this.border=function(){(this.x>=w||this.x<=0)&&(this.vector.x*=-1),(this.y>=h||this.y<=0)&&(this.vector.y*=-1),this.x>w&&(this.x=w),this.y>h&&(this.y=h),this.x<0&&(this.x=0),this.y<0&&(this.y=0)},this.draw=function(){drawArea.beginPath(),drawArea.arc(this.x,this.y,this.radius,0,2*Math.PI),drawArea.closePath(),drawArea.fillStyle=this.color,drawArea.fill()}};setup();var form_1=document.querySelector(".m__f--form [type=submit]");void 0!=form_1&&form_1.addEventListener("click",function(t){t.preventDefault();for(var e=this.parentElement,i=!1,a=e.querySelectorAll("input[required]"),n=0;n<a.length;n++)""==a[n].value?(i=!0,a[n].classList.add("error")):a[n].classList.remove("error");if(!i){for(var o=e.querySelector("input[name=email]").value,r=e.querySelector("input[name=company]").value,s=e.querySelector("input[name=name]").value,c=e.querySelector("textarea").value,n=0;n<a.length;n++)a[n].value="",a[n].classList.remove("error");e.querySelector("textarea").value="";var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return l.open("POST","https://mandrillapp.com/api/1.0/messages/send.json"),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.onreadystatechange=function(){4==l.readyState&&(200==l.status?console.log("sending"):alert("Пожалуйста, проверьте соединение с интернетом или перезапустите браузер. После этого отправьте заявку снова."))},l.send(JSON.stringify({key:"3nHfBfKZxETJ-VYZjMx4cw",message:{from_email:"metrix@smter.ru",to:[{email:"d@metrix.ai",type:"to"}],autotext:"true",subject:"C сайта METRIX",html:"<h2>Name - "+s+".</h2><h2>Company - "+r+".</h2><h2>Email - "+o+".</h2><h2>Message - "+c+".</h2>"}})),!1}});